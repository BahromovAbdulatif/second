<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî –ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏</title>
<style>
  :root{
    --bg:#f3f6fb; --panel:#fff; --ink:#0f172a; --muted:#64748b;
    --brand:#1e66ff; --brand-600:#1557df; --ring:#c7d7ff; --border:#e5e7eb;
    --ok:#16a34a; --warn:#f59e0b; --danger:#ef4444;
    --shadow:0 10px 25px rgba(2,6,23,.06), 0 2px 6px rgba(2,6,23,.04);
    --radius:14px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,#e9f0ff 0%, #f6f8ff 120%);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;color:var(--ink)}
  a{color:inherit;text-decoration:none}

  /* Topbar */
  .topbar{
    position:sticky;top:0;z-index:50;
    backdrop-filter:saturate(1.2) blur(6px);
    background:rgba(255,255,255,.8);
    border-bottom:1px solid var(--border);
  }
  .topbar-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:14px 20px}
  .brand{display:flex;gap:10px;align-items:center;font-weight:800}
  .brand-badge{width:28px;height:28px;border-radius:8px;background:#0b3ea9}
  .tabs{display:flex;gap:6px;flex-wrap:wrap}
  .tab{
    padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;color:#1f2a5a;
  }
  .tab.active{background:#eef2ff;color:#0b3ea9}

  /* Container */
  .wrap{max-width:1200px;margin:24px auto;padding:0 20px}

  /* Card / panel */
  .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
  .card-head{display:flex;align-items:center;justify-content:space-between;padding:18px 20px;border-bottom:1px solid var(--border)}
  .card-title{margin:0;font-size:18px;font-weight:800}
  .card-body{padding:18px 20px}

  /* Button */
  .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer;transition:filter .15s, transform .03s}
  .btn:active{transform:translateY(1px)}
  .btn.primary{background:var(--brand);color:#fff;box-shadow:0 8px 18px rgba(30,102,255,.18)}
  .btn.ghost{background:#eef2ff;color:#1f2a5a}
  .btn.icon{display:inline-flex;align-items:center;gap:8px}

  /* Table */
  .table{width:100%;border-collapse:separate;border-spacing:0}
  .table th,.table td{padding:12px 12px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top;font-size:14px}
  .table th{color:#334155;background:#f8fafc;font-weight:800}
  .table tr:hover td{background:#fafbff}
  .badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:12px;background:#eef2ff;color:#0b3ea9;font-weight:700}

  /* Sections (tabs content) */
  .section{display:none}
  .section.active{display:block}

  /* Modal */
  .modal-backdrop{
    position:fixed;inset:0;background:rgba(2,6,23,.5);
    display:none;align-items:center;justify-content:center;padding:20px;z-index:100;
  }
  .modal{width:100%;max-width:860px;background:#fff;border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow);overflow:hidden}
  .modal-head{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;background:#0b3ea9;color:#fff}
  .modal-title{margin:0;font-weight:800}
  .modal-body{padding:18px}
  .modal-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:14px}
  .form-row{display:flex;flex-direction:column;gap:8px}
  label{font-size:13px;font-weight:800}
  .req::after{content:" *";color:var(--danger)}
  input[type="text"],input[type="date"],input[type="time"],input[type="number"],input[type="tel"]{
    width:100%;padding:12px 14px;border:1px solid var(--border);border-radius:10px;font:inherit;background:#fff;outline:none;transition:border .15s, box-shadow .15s;
  }
  input:focus{border-color:var(--brand);box-shadow:0 0 0 4px var(--ring)}
  .muted{color:var(--muted);font-size:12px}

  .subcard{border:1px dashed var(--border);border-radius:12px;padding:12px;margin-top:14px}
  .subhead{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
  .row-grid{display:grid;grid-template-columns:1.2fr 1fr .3fr;gap:10px;margin-bottom:8px}
  .row-grid.participants{grid-template-columns:1.2fr 1fr .3fr}
  .remove{background:#fff;border:1px solid var(--border);border-radius:10px;padding:10px;cursor:pointer}
  .remove:hover{filter:brightness(.98)}
  .addline{margin-top:8px}

  .modal-actions{display:flex;gap:10px;justify-content:flex-end;padding:14px 18px;border-top:1px solid var(--border);background:#f8fafc}
  .modal-backdrop.show{display:flex}

  @media(max-width:720px){
    .modal-grid{grid-template-columns:1fr}
    .row-grid,.row-grid.participants{grid-template-columns:1fr 1fr .25fr}
    .topbar-inner{gap:10px}
  }
</style>
</head>
<body>

<header class="topbar">
  <div class="topbar-inner">
    <div class="brand">
      <span class="brand-badge"></span> Admin Panel
    </div>
    <nav class="tabs" id="tabs">
      <a class="tab active" data-target="sec-home">–ì–ª–∞–≤–Ω–∞—è</a>
      <a class="tab" data-target="sec-projects">–ü—Ä–æ–µ–∫—Ç—ã</a>
      <a class="tab" data-target="sec-people">–£—á–∞—Å—Ç–Ω–∏–∫–∏</a>
      <a class="tab" data-target="sec-settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
    </nav>
  </div>
</header>

<main class="wrap">
  <!-- –ì–ª–∞–≤–Ω–∞—è -->
  <section id="sec-home" class="section active">
    <div class="card">
      <div class="card-head">
        <h2 class="card-title">–°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ (–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏)</h2>
        <button class="btn primary icon" id="btn-new">
          ‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
        </button>
      </div>
      <div class="card-body">
        <div style="overflow:auto">
          <table class="table">
            <thead>
              <tr>
                <th>#</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</th>
                <th>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</th>
                <th>–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</th>
                <th>–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è</th>
                <th>–°—É–º–º–∞</th>
                <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
              </tr>
            </thead>
            <tbody id="projects-tbody">
              <!-- –ø—Ä–∏–º–µ—Ä—ã —Å—Ç—Ä–æ–∫ -->
              <tr>
                <td>1</td>
                <td>Design Summit 2025</td>
                <td>2025-05-12</td>
                <td>2025-05-13</td>
                <td>09:00</td>
                <td>18:00</td>
                <td>12000000 UZS</td>
                <td>BlueWave Events</td>
                <td><span class="badge">–ß–µ—Ä–Ω–æ–≤–∏–∫</span></td>
              </tr>
              <tr>
                <td>2</td>
                <td>Startup Meetup</td>
                <td>2025-07-02</td>
                <td>2025-07-02</td>
                <td>18:30</td>
                <td>21:00</td>
                <td>3500000 UZS</td>
                <td>Rocket Group</td>
                <td><span class="badge">–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω</span></td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="muted" style="margin-top:8px">–ù–∞–∂–º–∏—Ç–µ ¬´–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç¬ª, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é, —Å–ø–∏–∫–µ—Ä–æ–≤ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤.</p>
      </div>
    </div>
  </section>

  <!-- –î—Ä—É–≥–∏–µ –≤–∫–ª–∞–¥–∫–∏ (–ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã) -->
  <section id="sec-projects" class="section">
    <div class="card">
      <div class="card-head"><h2 class="card-title">–ü—Ä–æ–µ–∫—Ç—ã</h2></div>
      <div class="card-body">–¢—É—Ç –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å –ø–æ–∏—Å–∫/—Ñ–∏–ª—å—Ç—Ä—ã, —ç–∫—Å–ø–æ—Ä—Ç –∏ —Ç.–ø.</div>
    </div>
  </section>

  <section id="sec-people" class="section">
    <div class="card">
      <div class="card-head"><h2 class="card-title">–£—á–∞—Å—Ç–Ω–∏–∫–∏</h2></div>
      <div class="card-body">–°–≤–æ–¥–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ª—é–¥–µ–π –ø–æ –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–∞–º.</div>
    </div>
  </section>

  <section id="sec-settings" class="section">
    <div class="card">
      <div class="card-head"><h2 class="card-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2></div>
      <div class="card-body">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã SMS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥—Ä.</div>
    </div>
  </section>
</main>

<!-- –ú–æ–¥–∞–ª–∫–∞: –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç -->
<div class="modal-backdrop" id="modal">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div class="modal-head">
      <h3 class="modal-title" id="modal-title">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç (–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—é)</h3>
      <button class="btn ghost" id="close-modal">‚úï</button>
    </div>

    <form id="project-form">
      <div class="modal-body">
        <!-- –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è -->
        <div class="modal-grid">
          <div class="form-row">
            <label class="req" for="p-name">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
            <input id="p-name" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Design Summit 2025" required>
          </div>
          <div class="form-row">
            <label class="req" for="p-company">–ö–æ–º–ø–∞–Ω–∏—è-–æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä</label>
            <input id="p-company" type="text" placeholder="BlueWave Events" required>
          </div>
          <div class="form-row">
            <label class="req" for="p-date-start">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
            <input id="p-date-start" type="date" required>
          </div>
          <div class="form-row">
            <label class="req" for="p-date-end">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
            <input id="p-date-end" type="date" required>
          </div>
          <div class="form-row">
            <label class="req" for="p-time-start">–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞</label>
            <input id="p-time-start" type="time" required>
          </div>
          <div class="form-row">
            <label class="req" for="p-time-end">–í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
            <input id="p-time-end" type="time" required>
          </div>
          <div class="form-row">
            <label class="req" for="p-amount">–°—É–º–º–∞ (UZS)</label>
            <input id="p-amount" type="number" min="0" step="1000" placeholder="0" required>
          </div>
          <div class="form-row">
            <label for="p-status">–°—Ç–∞—Ç—É—Å</label>
            <input id="p-status" type="text" placeholder="–ß–µ—Ä–Ω–æ–≤–∏–∫ / –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω">
          </div>
        </div>

        <!-- –°–ø–∏–∫–µ—Ä—ã -->
        <div class="subcard" id="speakers-card">
          <div class="subhead">
            <strong>–°–ø–∏–∫–µ—Ä—ã</strong>
            <button class="btn ghost addline" type="button" id="add-speaker">+ –î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏–∫–µ—Ä–∞</button>
          </div>
          <div id="speakers-list">
            <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ -->
          </div>
          <p class="muted">–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–º—É –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ.</p>
        </div>

        <!-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ -->
        <div class="subcard" id="participants-card">
          <div class="subhead">
            <strong>–£—á–∞—Å—Ç–Ω–∏–∫–∏</strong>
            <button class="btn ghost addline" type="button" id="add-participant">+ –î–æ–±–∞–≤–∏—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–∞</button>
          </div>
          <div id="participants-list">
            <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ -->
          </div>
          <p class="muted">–£–∫–∞–∂–∏—Ç–µ –∏–º—è –∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è SMS —Å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–π —Å—Å—ã–ª–∫–æ–π).</p>
        </div>
      </div>

      <div class="modal-actions">
        <button type="button" class="btn ghost" id="cancel">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
      </div>
    </form>
  </div>
</div>

<script>
  // ------- –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤–∫–ª–∞–¥–∫–∞–º
  const tabs = document.querySelectorAll('.tab');
  const sections = document.querySelectorAll('.section');
  tabs.forEach(t => t.addEventListener('click', () => {
    tabs.forEach(x => x.classList.remove('active'));
    t.classList.add('active');
    const target = t.dataset.target;
    sections.forEach(s => s.classList.toggle('active', s.id === target));
  }));

  // ------- –º–æ–¥–∞–ª–∫–∞
  const modal = document.getElementById('modal');
  const btnNew = document.getElementById('btn-new');
  const btnClose = document.getElementById('close-modal');
  const btnCancel = document.getElementById('cancel');

  const openModal = () => {
    modal.classList.add('show');
    // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ —Å–ø–∏–∫–µ—Ä–∞ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞
    if (!document.querySelector('.speaker-row')) addSpeakerRow();
    if (!document.querySelector('.participant-row')) addParticipantRow();
  };
  const closeModal = () => modal.classList.remove('show');

  btnNew.addEventListener('click', openModal);
  btnClose.addEventListener('click', closeModal);
  btnCancel.addEventListener('click', closeModal);
  modal.addEventListener('click', (e)=>{ if(e.target===modal) closeModal(); });

  // ------- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏: —Å–ø–∏–∫–µ—Ä—ã
  const speakersList = document.getElementById('speakers-list');
  document.getElementById('add-speaker').addEventListener('click', addSpeakerRow);

  function addSpeakerRow(nameVal='', topicVal=''){
    const row = document.createElement('div');
    row.className = 'row-grid speaker-row';
    row.innerHTML = `
      <input type="text" placeholder="–ò–º—è —Å–ø–∏–∫–µ—Ä–∞" value="${nameVal}">
      <input type="text" placeholder="–¢–µ–º–∞ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è" value="${topicVal}">
      <button class="remove" type="button" aria-label="–£–¥–∞–ª–∏—Ç—å">üóë</button>
    `;
    row.querySelector('.remove').onclick = ()=> row.remove();
    speakersList.appendChild(row);
  }

  // ------- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏: —É—á–∞—Å—Ç–Ω–∏–∫–∏
  const participantsList = document.getElementById('participants-list');
  document.getElementById('add-participant').addEventListener('click', addParticipantRow);

  function addParticipantRow(nameVal='', phoneVal=''){
    const row = document.createElement('div');
    row.className = 'row-grid participants participant-row';
    row.innerHTML = `
      <input type="text" placeholder="–ò–º—è —É—á–∞—Å—Ç–Ω–∏–∫–∞" value="${nameVal}">
      <input type="tel" placeholder="+998 (__) ___-__-__" value="${phoneVal}" pattern="^\\+?\\d[\\d\\s\\-()]{6,}$" title="–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä">
      <button class="remove" type="button" aria-label="–£–¥–∞–ª–∏—Ç—å">üóë</button>
    `;
    row.querySelector('.remove').onclick = ()=> row.remove();
    participantsList.appendChild(row);
  }

  // ------- ¬´—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ¬ª (–ø–æ–∫–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–µ—Ä—Å—Ç–∫–∏)
  const form = document.getElementById('project-form');
  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    // —Å–æ–±–µ—Ä—ë–º –¥–∞–Ω–Ω—ã–µ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ API)
    const payload = {
      name: document.getElementById('p-name').value.trim(),
      company: document.getElementById('p-company').value.trim(),
      date_start: document.getElementById('p-date-start').value,
      date_end: document.getElementById('p-date-end').value,
      time_start: document.getElementById('p-time-start').value,
      time_end: document.getElementById('p-time-end').value,
      amount: document.getElementById('p-amount').value,
      status: document.getElementById('p-status').value.trim(),
      speakers: Array.from(document.querySelectorAll('.speaker-row')).map(r=>({
        name: r.children[0].value.trim(),
        topic: r.children[1].value.trim()
      })).filter(x=>x.name||x.topic),
      participants: Array.from(document.querySelectorAll('.participant-row')).map(r=>({
        name: r.children[0].value.trim(),
        phone: r.children[1].value.trim()
      })).filter(x=>x.name||x.phone),
    };

    // –î–æ–±–∞–≤–∏–º —Å—Ç—Ä–æ–∫—É –≤ —Ç–∞–±–ª–∏—Ü—É (–≤–∏–∑—É–∞–ª—å–Ω–æ)
    const tbody = document.getElementById('projects-tbody');
    const idx = tbody.children.length + 1;
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${idx}</td>
      <td>${payload.name || '‚Äî'}</td>
      <td>${payload.date_start || '‚Äî'}</td>
      <td>${payload.date_end || '‚Äî'}</td>
      <td>${payload.time_start || '‚Äî'}</td>
      <td>${payload.time_end || '‚Äî'}</td>
      <td>${payload.amount ? `${Number(payload.amount).toLocaleString('ru-RU')} UZS` : '‚Äî'}</td>
      <td>${payload.company || '‚Äî'}</td>
      <td><span class="badge">${payload.status || '–ß–µ—Ä–Ω–æ–≤–∏–∫'}</span></td>
    `;
    tbody.appendChild(tr);

    // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∫–∏
    form.reset();
    speakersList.innerHTML = '';
    participantsList.innerHTML = '';
    closeModal();

    // –ù–∞ —Ä–µ–∞–ª—å–Ω–æ–º –±—ç–∫–µ: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å payload —á–µ—Ä–µ–∑ fetch('/admin/projects', {method:'POST', body: JSON.stringify(payload)})
    console.log('PROJECT_PAYLOAD', payload);
  });
</script>
</body>
</html>
